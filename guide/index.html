<!DOCTYPE html>
<html>

<head>
  <title>转租群引导</title>
  <meta charset="UTF-8">
  <meta name="referrer" content="no-referrer" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <!-- <link href="/test/video-js.css" rel="stylesheet" /> -->
  <link href="https://cdn.staticfile.org/video.js/8.5.0/video-js.min.css" rel="stylesheet" />
  <style>
    body {
      width: 100vw;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 0;
      margin: 0;
      background: black;
    }
  </style>
  <script src="https://cdn.staticfile.org/video.js/8.5.0/video.min.js"></script>
</head>

<body>

  <script>

    function wechatNotWifi() {
      let ua = window.navigator.userAgent
      // 如果是微信非WiFi
      if (/MicroMessenger/.test(ua)) {
        if (ua.indexOf('WIFI') == -1) {
          return true;
        }
      }
      return false
    }

    function switchDyVideoUrl(videoUrl) {
      if (videoUrl.indexOf('douyin.com') >= 0) {
        if (wechatNotWifi()) {
          return 'https://dy.fzchats.uk?proxyurl=' + videoUrl
        }
      }
      return videoUrl;
    }

    function getQueryParams() {
      var params = {};
      var queryString = window.location.search.substring(1);
      var pairs = queryString.split('&');
      for (var i = 0; i < pairs.length; i++) {
          let index = pairs[i].indexOf('=');
          var pair = [pairs[i].slice(0, index), pairs[i].slice(index + 1)];
          var key = decodeURIComponent(pair[0]);
          var value = decodeURIComponent(pair[1]);
          params[key] = value;
      }
      return params;
    }
    window.onload = function () {
      var queryParams = getQueryParams();
      var type = queryParams['type'];
      var videoHtml = '<video id="my-video" class="video-js" poster="https://p9-pc-sign.douyinpic.com/tos-cn-p-0015/oc6AWJ8KfInayDBAICKgbEDGlSQf9DYANgPVpB~tplv-dy-resize-origshort-autoq-75:330.jpeg?x-expires=2012565600&x-signature=WL%2F8sm5bfa7t0HArPgwBiKin0Yk%3D&from=3213915784&s=PackSourceEnum_AWEME_DETAIL&se=false&sc=cover&biz_tag=pcweb_cover&l=202310132227104783875D5917612891EB"'
       + 'data-setup=\'{"controls": true, "autoplay": true, "preload": "auto","height":"100%","loop": true,"fill":true}\'>'
      + '<source src="' + switchDyVideoUrl("https://www.douyin.com/aweme/v1/play/?video_id=v0d00fg10000ckkl4cjc77u0oo8obfgg") + '" type="video/mp4" /></video>'
      if(type&&type==2){
        videoHtml = '<video id="my-video" class="video-js" poster="https://p9-pc-sign.douyinpic.com/tos-cn-p-0015/bc79d85d7228438b9ab4aa1de59739d1_1699308357~tplv-dy-resize-origshort-autoq-75:330.jpeg?x-expires=2014732800&x-signature=t2tBuT6AWZcuAVEar%2FRu%2F5Kb1C8%3D&from=3213915784&s=PackSourceEnum_AWEME_DETAIL&se=false&sc=cover&biz_tag=pcweb_cover&l=202311080013459C2AE83F687BD133E800"'
        + 'data-setup=\'{"controls": true, "autoplay": true, "preload": "auto","height":"100%","loop": true,"fill":true}\'>'
       + '<source src="' + switchDyVideoUrl("https://www.douyin.com/aweme/v1/play/?video_id=v0d00fg10000cl4m4vbc77u84891t4o0") + '" type="video/mp4" /></video>'
      }
      document.body.innerHTML = videoHtml
      // document.body.innerHTML = '<p style="background:white">' + window.navigator.userAgent + '</p>'
    }
  </script>
</body>

</html>